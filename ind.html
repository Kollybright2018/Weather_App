<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<link rel="manifest" href="images/site.webmanifest">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .back-con{
            background-image: url('images/maker.gif') !important;
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
        }
.title{
    font-weight: 800;
 font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

}        
.elements, .info{
        background: linear-gradient(360deg, #201717, transparent) !important;
        font-weight: 700;
        font-family: Georgia, 'Times New Roman', Times, serif;
}

.info{
        background: linear-gradient(360deg, #201717, transparent) !important;
        font-weight: 700;
        font-family: Georgia, 'Times New Roman', Times, serif;
}
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-4 mt-3 back-con col-sm-12">
                    <h1 class="text-center text-light title p-3">Weather Map</h1>
                    <div class="form-con">
                         <form action="" id="form_search">
                        <div class="input-group">
                            <input type="text" name="search" value="" id="search" placeholder="Search city here" class="form-control ">
                            <button type="submit" class="btn  btn-light input-group-text" id="search_btn"> <i class=" fas fa-search"></i></button>
                            <p id="error"> </p>  
                      </div>
                    </form>
                    </div>
                      <!-- <h5 class="text-center mt-3 text-light" id="time"> <i class="fas fa-clock"></i> Todays, 09:00  </h4> -->
                        <h5 id="city" class="text-center text-light" > </h5>

                        <div class="elements p-3 text-center text-light" id="elements">
                         
                         </div>

                        <div class="info text-center text-light my-3 p-5">
                            <h5 id="temp_range"></h5>
                             <h5 id="humidity"></h5>  
                             <h5 id="pressure"></h5> 
                         </div>

                            </div>
                            
                         </div>

                </div>
            </div>
    


    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- <script src="js/script.js"></script> -->
    <script>
        let url =
  "  https://api.openweathermap.org/data/2.5/weather?q=iseyin&units=metric&appid=d7c0bb775441adcc1f3dcea6a20bd261";

// https://api.openweathermap.org/data/2.5/weather?q={city}&units=metric&appid={d7c0bb775441adcc1f3dcea6a20bd261}'

// form and other element
const form = document.getElementById("form_search");
let search = form["search"];
let temp = "";
let pressure = "";
let text = "";
let elements = "";
let weather_condition = "";
let humidity = "";
let country = "";
let temp_range = "";

// functions

// get id and display function
function getid(id, display) {
  id = document.getElementById(id);
  id.innerHTML = display;
}
async function weather(city) {
  let data = await axios.get(
    "https://api.openweathermap.org/data/2.5/weather?q=" +
      city +
      "&units=metric&appid=d7c0bb775441adcc1f3dcea6a20bd261"
  );
//   console.log(data);
  if (search.value.trim() != "") {
    // city error
    // if(data.length ===0  ){
    //    getid('error', "Invalid City Name")
    // }else{}

    text =
      ' <i class="fas fa-map-marker-alt"> ' +
      data.data["name"] +
      "   " +
      data.data.sys.country +
      " </i>";
  

    elements =
      '<span class="px-4"><b><i class="fas fa-temperature-high"></i>+' +
      data.data.main.temp +
      "</b> </span>" +
      '  <span class="px-4"><b><i class="fas fa-cloud"></i> ' +
      data.data.weather[0].main +
      '</b>   </span> <br><span class="px-5"><b>' +
      data.data.weather[0].description +
      "</b></span>";

    temp_range =
      "Temp Range :" +
      data.data.main.temp_min +
      " / " +
      data.data.main.temp_max;
    pressure = "Pressure: " + data.data.main["pressure"];
    humidity = "Humidity : " + data.data.main["humidity"];

    getid("elements", elements);
    getid("city", text);
    getid("temp_range", temp_range);
    getid("pressure", pressure);
    getid("humidity", humidity);
  } else {
    getid("error", "Field cannot be empty");
  }
}

// weather(town)
form.addEventListener("submit", (e) => {
  e.preventDefault();
  weather(search.value);
  console.log(search.value);
});


    </script>
</body>
</html>